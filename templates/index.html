<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>هالستون — صفحه اصلی</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header>
    <div class="header-inner">
      <div class="logo">HALSTON</div>

      <nav class="main-nav">
        <ul>
          <li><a href="{{ url_for('index') }}">خانه</a></li>
          <li><a href="{{ url_for('category', category_name='women') }}">زنانه</a></li>
          <li><a href="{{ url_for('category', category_name='men') }}">مردانه</a></li>
          <li><a href="{{ url_for('category', category_name='kids') }}">بچگانه</a></li>
          <li><a href="{{ url_for('contact') }}">تماس با ما</a></li>
        </ul>
      </nav>

      <!-- سبد خرید بالا سمت چپ -->
      <div class="cart-wrapper">
        <button id="cart-toggle" class="cart-btn" onclick="toggleCartPopup(event)">
          🛒 <span id="cart-count">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- پاپ‌آپ مینی‌کارت -->
  <div id="cart-popup" class="cart-popup hidden" aria-hidden="true">
    <h4>سبد خرید</h4>
    <div id="cart-items" class="cart-items">
      <!-- آیتم‌ها با JS پر می‌شوند -->
    </div>
    <div class="cart-footer">
      <div id="cart-total">جمع: 0 تومان</div>
      <div class="cart-actions">
        <button onclick="clearCart()" class="btn small">پاک کردن</button>
        <button onclick="checkout()" class="btn primary small">تسویه</button>
      </div>
    </div>
  </div>

  <main>
    <section class="hero">
      <div class="hero-slide active">
        <div class="hero-content">
          <h1>کالکشن جدید تابستان 2025</h1>
          <p>جدیدترین محصولات با بهترین کیفیت</p>
          <a class="btn primary" href="#products">مشاهده محصولات</a>
        </div>
      </div>
    </section>

    <section id="products" class="products-section">
      <h2>محصولات ویژه</h2>
      <div class="products-grid">
        {% if products %}
          {% for code, p in products.items() %}
          <article class="product-card" role="button" tabindex="0">
            <div class="product-info">
              <h3 class="product-name">{{ p.name }}</h3>
              <div class="product-price">{{ "{:,}".format(p.price | default(0) | int) }} تومان</div>
            </div>
            <div class="product-actions">
              <button class="btn add" onclick="event.stopPropagation(); addToCart('{{ code }}', '{{ p.name }}', {{ p.price | default(0) }})">افزودن به سبد</button>
            </div>
          </article>
          {% endfor %}
        {% else %}
          <p>هیچ محصولی یافت نشد 😢</p>
        {% endif %}
      </div>
    </section>
  </main>

  <footer>
    <div class="footer-inner">
      © 2025 هالستون — تمامی حقوق محفوظ است.
    </div>
  </footer>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
