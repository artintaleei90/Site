<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>فروشگاه Halston</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background-color: #f9f9f9; }
        .container { width: 90%; margin: 0 auto; }

        /* هدر */
        .top-header, .main-header, .main-nav { background-color: #222; color: white; }
        .top-header .container, .main-header .container, .main-nav .container { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; }
        .top-header a, .main-nav a { color: white; text-decoration: none; margin-left: 15px; }
        .main-header .logo { font-size: 1.5rem; font-weight: bold; cursor: pointer; }
        .search-bar input { padding: 5px; width: 200px; }
        .search-bar button { padding: 5px 10px; }

        /* اسلایدر */
        .hero-slider { position: relative; margin: 20px 0; height: 400px; overflow: hidden; border-radius: 8px; }
        .hero-slide { width: 100%; height: 100%; background-size: cover; background-position: center; display: none; position: absolute; top: 0; left: 0; }
        .hero-slide.active { display: block; }
        .slide-content { color: white; position: absolute; bottom: 30px; right: 30px; }

        /* بنرها */
        .promo-banners { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 30px 0; }
        .promo-banner { position: relative; border-radius: 8px; overflow: hidden; height: 150px; cursor: pointer; }
        .promo-banner img { width: 100%; height: 100%; object-fit: cover; }
        .banner-content { position: absolute; top: 0; right: 0; width: 50%; height: 100%; display: flex; flex-direction: column; justify-content: center; padding: 0 20px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }

        /* محصولات */
        .products-container { margin: 20px 0; }
        .products-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 20px; }
        .product-card { background-color: white; border: 1px solid #ccc; padding: 10px; text-align: center; border-radius: 4px; }
        .product-image { width: 100%; height: auto; border-radius: 4px; }
        .product-name { font-weight: bold; margin: 10px 0; }
        .product-price { color: green; margin-bottom: 10px; }
        .product-card button { padding: 5px 10px; background-color: #4CAF50; border: none; border-radius: 4px; color: white; cursor: pointer; }
        .product-card button:hover { background-color: #45a049; }

        /* فرم سفارش */
        .order-form { background-color: white; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .order-form label { display: block; margin: 5px 0; }
        .order-form input, .order-form textarea { width: 100%; padding: 8px; margin-bottom: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .order-form button { padding: 10px 20px; background-color: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; }
        .order-form button:hover { background-color: #45a049; }

        /* فوتر */
        footer { background-color: #222; color: white; padding: 40px 0; }
        .footer-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .footer-section h3 { margin-bottom: 15px; font-size: 1.2rem; }
        .footer-links { list-style: none; padding: 0; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a { color: #ccc; text-decoration: none; }
        .footer-links a:hover { color: white; }
        .copyright { text-align: center; margin-top: 20px; color: #ccc; font-size: 0.85rem; }

        /* ریسپانسیو */
        @media (max-width: 768px) {
            .promo-banners { grid-template-columns: 1fr; }
            .products-grid { grid-template-columns: 1fr; }
            .footer-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- هدر بالا -->
    <div class="top-header">
        <div class="container">
            <div>
                <a href="#">راهنمای خرید</a>
                <a href="#">پشتیبانی: ۰۹۱۲۸۸۸۳۳۴۳</a>
            </div>
            <div>
                <a href="#">حساب کاربری</a>
                <a href="#">پیگیری سفارش</a>
            </div>
        </div>
    </div>

    <!-- هدر اصلی -->
    <header class="main-header">
        <div class="container">
            <div class="logo" onclick="goToHome()">HALSTON</div>
            <div class="search-bar">
                <input type="text" placeholder="جستجوی محصولات...">
                <button>جستجو</button>
            </div>
        </div>
    </header>

    <!-- منوی اصلی -->
    <nav class="main-nav">
        <div class="container">
            <ul>
                <li><a href="/">خانه</a></li>
                <li><a href="#">پوشاک زنانه</a></li>
                <li><a href="#">مجموعه بهاری</a></li>
            </ul>
        </div>
    </nav>

    <!-- اسلایدر -->
    <div class="container">
        <div class="hero-slider">
            <div class="hero-slide active" style="background-image: url('https://images.unsplash.com/photo-1490481651871-ab68de25d43d');">
                <div class="slide-content">
                    <h2>کالکشن جدید بهار ۱۴۰۳</h2>
                    <p>جدیدترین محصولات با بهترین کیفیت</p>
                </div>
            </div>
        </div>
    </div>

    <!-- بنرهای تبلیغاتی -->
    <div class="container">
        <div class="promo-banners">
            <div class="promo-banner">
                <img src="https://images.unsplash.com/photo-1520006403909-838d6b92c22e" alt="پوشاک زنانه">
                <div class="banner-content">
                    <h3>پوشاک زنانه</h3>
                </div>
            </div>
            <div class="promo-banner">
                <img src="https://images.unsplash.com/photo-1558769132-cb1aea458c5e" alt="مجموعه بهاری">
                <div class="banner-content">
                    <h3>مجموعه بهاری</h3>
                </div>
            </div>
        </div>
    </div>

    <!-- محصولات -->
    <div class="container products-container">
        <h2>محصولات ما</h2>
        <div id="products-grid" class="products-grid">
            <div>در حال بارگذاری محصولات...</div>
        </div>
    </div>

    <!-- فرم سفارش -->
    <div class="container order-form">
        <h2>ثبت سفارش</h2>
        <form id="order-form" onsubmit="submitOrder(); return false;">
            <label for="customer-name">نام و نام خانوادگی:</label>
            <input type="text" id="customer-name" name="customer-name" required>

            <label for="phone">شماره تماس:</label>
            <input type="text" id="phone" name="phone" required>

            <label for="address">آدرس:</label>
            <textarea id="address" name="address" required></textarea>

            <button type="submit">ارسال سفارش</button>
        </form>
    </div>

    <!-- فوتر -->
    <footer>
        <div class="container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>درباره ما</h3>
                    <p>فروشگاه Halston با ارائه بهترین محصولات پوشاک زنانه، همراه شماست.</p>
                </div>
                <div class="footer-section">
                    <h3>لینک‌های مفید</h3>
                    <ul class="footer-links">
                        <li><a href="#">خانه</a></li>
                        <li><a href="#">محصولات</a></li>
                        <li><a href="#">تماس با ما</a></li>
                    </ul>
                </div>
            </div>
            <div class="copyright">© 1403 Halston. تمامی حقوق محفوظ است.</div>
        </div>
    </footer>

    <!-- اسکریپت -->
    <script>
        // رفتن به خانه
        function goToHome() { window.location.href = '/'; }

        // سبد خرید
        let cart = [];

        // دریافت محصولات
        async function fetchProducts() {
            try {
                const response = await fetch('/products');
                const products = await response.json();
                displayProducts(products);
            } catch (error) {
                console.error('خطا در دریافت محصولات:', error);
            }
        }

        // نمایش محصولات
        function displayProducts(products) {
            const productsGrid = document.getElementById('products-grid');
            productsGrid.innerHTML = '';
            products.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">${product.price} تومان</p>
                        <button onclick="addToCart(${product.id})">افزودن به سبد خرید</button>
                    </div>
                `;
                productsGrid.appendChild(productCard);
            });
        }

        // افزودن به سبد خرید
        function addToCart(productId) {
            const product = cart.find(p => p.id === productId);
            if (product) product.quantity++;
            else cart.push({ id: productId, quantity: 1 });
            alert('محصول به سبد خرید اضافه شد');
        }

        // ارسال سفارش به main.py -> تلگرام
        async function submitOrder() {
            const order = {
                customerName: document.getElementById('customer-name').value,
                phone: document.getElementById('phone').value,
                address: document.getElementById('address').value,
                cart: cart
            };
            try {
                const response = await fetch('/order', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(order)
                });
                if (response.ok) {
                    alert('سفارش با موفقیت ارسال شد');
                    cart = [];
                    document.getElementById('order-form').reset();
                } else alert('خطا در ارسال سفارش');
            } catch (error) {
                console.error('خطا در ارسال سفارش:', error);
            }
        }

        // بارگذاری محصولات هنگام بارگذاری صفحه
        window.onload = fetchProducts;
    </script>
</body>
</html>
