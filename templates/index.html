<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>هالستون | فروشگاه اینترنتی پوشاک</title>
<style>
:root {
    --primary-color: #e52733;
    --secondary-color: #333;
    --light-color: #f8f9fa;
    --gray-color: #6c757d;
    --border-color: #dee2e6;
    --background-color: #f5f5f5;
}
* {margin:0;padding:0;box-sizing:border-box;font-family:Tahoma, Arial, sans-serif;}
body {background-color: var(--background-color); color:#333; line-height:1.6;}
.container {max-width:1200px;margin:0 auto;padding:0 15px;}
.top-header {background-color:#f5f5f5;border-bottom:1px solid var(--border-color);padding:8px 0;font-size:0.85rem;}
.top-header .container {display:flex;justify-content:space-between;align-items:center;}
.top-header-links {display:flex;gap:20px;}
.top-header-links a {color: var(--gray-color); text-decoration:none; transition:color 0.3s;}
.top-header-links a:hover {color: var(--primary-color);}
.main-header {background-color:white; padding:15px 0; box-shadow:0 2px 5px rgba(0,0,0,0.05);}
.main-header .container {display:flex; justify-content:space-between; align-items:center;}
.logo {font-size:24px;font-weight:bold;color:var(--primary-color);cursor:pointer;}
.search-bar {flex-grow:1;margin:0 20px; position:relative; max-width:500px;}
.search-bar input {width:100%; padding:10px 40px 10px 15px; border:1px solid var(--border-color); border-radius:4px; font-size:0.9rem;}
.search-bar button {position:absolute; left:10px; top:50%; transform:translateY(-50%); background:none; border:none; color:var(--gray-color); cursor:pointer;}
.header-actions {display:flex; gap:20px; align-items:center;}
.header-action {display:flex; flex-direction:column; align-items:center; text-decoration:none; color:var(--secondary-color); font-size:0.85rem; cursor:pointer;}
.header-action span {margin-bottom:5px; font-size:1.2rem;}
.cart-wrapper {position:relative;}
.cart-count {position:absolute; top:-5px; right:-5px; background-color:var(--primary-color); color:white; border-radius:50%; width:18px; height:18px; font-size:0.7rem; display:flex; justify-content:center; align-items:center;}
.main-nav {background-color: var(--primary-color);}
.main-nav .container {display:flex; justify-content:space-between; align-items:center;}
.all-categories {position:relative; cursor:pointer; display:flex; align-items:center; color:white; padding:12px 20px;}
.categories-menu {position:absolute; top:100%; right:0; width:200px; background:white; box-shadow:0 5px 15px rgba(0,0,0,0.1); border-radius:4px; z-index:100; display:none;}
.categories-menu.active {display:block;}
.categories-menu ul {list-style:none; padding:10px 0;}
.categories-menu li {padding:10px 20px; cursor:pointer; transition: background-color 0.3s;}
.categories-menu li:hover {background-color:var(--light-color);}
.main-nav ul {display:flex; list-style:none;}
.main-nav li {position:relative;}
.main-nav a {display:block;color:white;text-decoration:none;padding:12px 20px; transition: background-color 0.3s;font-size:0.9rem; cursor:pointer;}
.main-nav a:hover {background-color:rgba(0,0,0,0.1);}
.hero-slider {position:relative; overflow:hidden; height:400px; margin:20px 0;}
.hero-slide {position:absolute; top:0; left:0; width:100%; height:100%; opacity:0; transition:opacity 1s ease; background-size:cover; background-position:center; display:flex; align-items:center;}
.hero-slide.active {opacity:1;}
.slide-content {max-width:1200px; margin:0 auto; padding:0 15px; color:white; text-shadow:0 2px 4px rgba(0,0,0,0.5);}
.slide-content h2 {font-size:2.5rem; margin-bottom:15px;}
.slide-content p {font-size:1.2rem; margin-bottom:20px;}
.btn {display:inline-block; padding:12px 25px; background-color:var(--primary-color); color:white; text-decoration:none; border-radius:4px; font-weight:500; transition: background-color 0.3s; cursor:pointer;}
.btn:hover {background-color:#c41f29;}
.products-section {padding:40px 0; background:white; border-radius:8px; box-shadow:0 2px 10px rgba(0,0,0,0.05); margin-bottom:20px;}
.section-header {display:flex; justify-content:space-between; align-items:center; margin-bottom:25px; padding-bottom:15px; border-bottom:1px solid var(--border-color);}
.section-title {font-size:1.5rem; color:var(--secondary-color); position:relative;}
.section-title:after {content:''; position:absolute; bottom:-16px; right:0; width:60px; height:3px; background-color:var(--primary-color);}
.view-all {color:var(--primary-color); text-decoration:none; font-size:0.9rem; cursor:pointer;}
.products-grid {display:grid; grid-template-columns:repeat(4,1fr); gap:20px;}
.product-card {background:white; border-radius:8px; overflow:hidden; box-shadow:0 2px 10px rgba(0,0,0,0.08); transition:transform 0.3s, box-shadow 0.3s; position:relative;}
.product-card:hover {transform:translateY(-5px); box-shadow:0 8px 20px rgba(0,0,0,0.12);}
.product-image {width:100%; height:220px; object-fit:cover; border-bottom:1px solid var(--border-color);}
.product-info {padding:15px;}
.product-name {font-size:0.95rem; margin-bottom:10px; height:44px; overflow:hidden; line-height:1.4;}
.product-price {display:flex; align-items:center; justify-content:space-between; margin-top:10px;}
.price {font-weight:bold; color:var(--primary-color); font-size:1.1rem;}
.product-actions {display:flex; justify-content:space-between; align-items:center; margin-top:15px;}
.add-to-cart {background-color:var(--primary-color); color:white; border:none; border-radius:4px; padding:8px 12px; cursor:pointer; transition: background-color 0.3s;}
.add-to-cart:hover {background-color:#c41f29;}
.wishlist-btn {background:none; border:none; color:var(--gray-color); cursor:pointer; font-size:1.2rem; transition: color 0.3s;}
.wishlist-btn.active {color:var(--primary-color);}
.wishlist-btn:hover {color:var(--primary-color);}
.quantity-selector {display:flex; align-items:center; margin-top:10px;}
.quantity-label {margin-left:10px; font-size:0.9rem;}
.quantity-controls {display:flex; align-items:center;}
.quantity-btn {width:25px; height:25px; background-color:var(--light-color); border:1px solid var(--border-color); border-radius:4px; display:flex; align-items:center; justify-content:center; cursor:pointer;}
.quantity-input {width:40px; height:25px; text-align:center; border:1px solid var(--border-color); margin:0 5px; border-radius:4px;}
.cart-popup {position:fixed; top:0; right:0; width:350px; height:100vh; background:white; box-shadow:-5px 0 15px rgba(0,0,0,0.1); z-index:1000; padding:20px; overflow-y:auto; transform:translateX(100%); transition: transform 0.3s ease;}
.cart-popup.active {transform:translateX(0);}
.cart-header {display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; padding-bottom:15px; border-bottom:1px solid var(--border-color);}
.close-cart {background:none; border:none; font-size:1.2rem; cursor:pointer;}
.cart-items {margin-bottom:20px;}
.cart-item {display:flex; margin-bottom:15px; padding-bottom:15px; border-bottom:1px solid var(--border-color);}
.cart-item-image {width:70px; height:70px; object-fit:cover; border-radius:4px; margin-left:10px;}
.cart-item-details {flex-grow:1;}
.cart-item-name {font-size:0.9rem; font-weight:500; margin-bottom:5px;}
.cart-item-price {color:var(--primary-color); font-weight:bold; font-size:0.9rem;}
.cart-item-quantity {display:flex; align-items:center; margin-top:5px;}
.remove-item {background:none; border:none; color:var(--primary-color); cursor:pointer; font-size:0.85rem; margin-top:5px;}
.cart-total {display:flex; justify-content:space-between; font-weight:bold; margin-bottom:15px; font-size:1rem;}
.checkout-btn {display:block; width:100%; text-align:center; padding:10px; background-color:var(--primary-color); color:white; border-radius:4px; cursor:pointer; text-decoration:none;}
.checkout-btn:hover {background-color:#c41f29;}
.modal {position:fixed; top:50%; left:50%; transform:translate(-50%,-50%) scale(0); background:white; width:90%; max-width:400px; padding:20px; z-index:1100; border-radius:8px; transition:transform 0.3s ease;}
.modal.active {transform:translate(-50%,-50%) scale(1);}
.modal-header {display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;}
.close-modal {background:none; border:none; font-size:1.2rem; cursor:pointer;}
.overlay {position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:100; display:none;}
.overlay.active {display:block;}
.modal form input, .modal form textarea {width:100%; padding:10px; margin-bottom:10px; border:1px solid var(--border-color); border-radius:4px;}
.modal form button {width:100%; padding:10px; background-color:var(--primary-color); color:white; border:none; border-radius:4px; cursor:pointer; font-size:1rem;}
.modal form button:hover {background-color:#c41f29;}
table {width:100%; border-collapse:collapse;}
th, td {padding:8px; border:1px solid var(--border-color); text-align:center;}
th {background:var(--light-color);}
.error {color:red; text-align:center; padding:20px 0;}
.empty-cart {text-align:center; padding:40px 0; color:var(--gray-color);}
@media(max-width:1024px){.products-grid{grid-template-columns:repeat(3,1fr);}}
@media(max-width:768px){.products-grid{grid-template-columns:repeat(2,1fr);}.search-bar{margin:10px 0;}}
@media(max-width:480px){.products-grid{grid-template-columns:1fr;}}
</style>
</head>
<body>
<div class="overlay" id="overlay" onclick="closeAllModals()"></div>

<!-- هدر -->
<header>
    <div class="top-header">
        <div class="container">
            <div>تلفن: 09123456789 | ایمیل: info@halston.com</div>
            <div class="top-header-links">
                <a onclick="showGuide()">راهنما</a>
                <a onclick="showAccount()">حساب کاربری</a>
                <a onclick="showTracking()">پیگیری سفارش</a>
                <a onclick="showWishlist()">علاقه‌مندی‌ها</a>
            </div>
        </div>
    </div>
    <div class="main-header">
        <div class="container">
            <div class="logo" onclick="goToHome()">Halston</div>
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="جستجوی محصولات...">
                <button>🔍</button>
            </div>
            <div class="header-actions">
                <div class="header-action cart-wrapper" onclick="toggleCart()">
                    <span>🛒</span>
                    <div class="cart-count" id="cart-count">0</div>
                    <div>سبد خرید</div>
                </div>
            </div>
        </div>
    </div>
    <nav class="main-nav">
        <div class="container">
            <div class="all-categories" onclick="toggleCategories()">دسته‌بندی‌ها ▼
                <div class="categories-menu" id="categories-menu">
                    <ul>
                        <li onclick="showAllProducts()">همه محصولات</li>
                        <li onclick="filterProducts('لباس')">لباس</li>
                        <li onclick="filterProducts('کفش')">کفش</li>
                        <li onclick="filterProducts('اکسسوری')">اکسسوری</li>
                    </ul>
                </div>
            </div>
            <ul>
                <li><a href="#">خانه</a></li>
                <li><a href="#">محصولات</a></li>
                <li><a href="#">درباره ما</a></li>
                <li><a href="#">تماس با ما</a></li>
            </ul>
        </div>
    </nav>
</header>

<!-- بخش محصولات -->
<section class="products-section container">
    <div class="section-header">
        <h2 class="section-title">محصولات</h2>
        <span class="view-all" onclick="showAllProducts()">مشاهده همه</span>
    </div>
    <div class="products-grid" id="products-grid">
        <!-- محصولات توسط JS اضافه می‌شوند -->
    </div>
</section>

<!-- سبد خرید -->
<div class="cart-popup" id="cart-popup">
    <div class="cart-header">
        <h3>سبد خرید</h3>
        <button class="close-cart" onclick="closeCart()">✖</button>
    </div>
    <div class="cart-items" id="cart-items"></div>
    <div class="cart-total">
        <span>جمع کل:</span>
        <span id="cart-total">0 تومان</span>
    </div>
    <button class="checkout-btn" onclick="openUserInfoModal()">ثبت سفارش</button>
</div>

<!-- مودال اطلاعات کاربر -->
<div class="modal" id="user-info-modal">
    <div class="modal-header">
        <h3>اطلاعات مشتری</h3>
        <button class="close-modal" onclick="closeUserInfoModal()">✖</button>
    </div>
    <form onsubmit="event.preventDefault(); generateInvoice();">
        <input type="text" id="name" placeholder="نام و نام خانوادگی" required>
        <input type="text" id="phone" placeholder="شماره تماس" required>
        <textarea id="address" placeholder="آدرس" rows="3" required></textarea>
        <div id="order-items"></div>
        <button type="submit">تولید فاکتور</button>
    </form>
</div>

<!-- مودال فاکتور -->
<div class="modal" id="invoice-modal">
    <div class="modal-header">
        <h3>فاکتور</h3>
        <button class="close-modal" onclick="closeInvoice()">✖</button>
    </div>
    <div id="invoice-content">
        <p><strong>نام مشتری:</strong> <span id="invoice-name"></span></p>
        <p><strong>شماره تماس:</strong> <span id="invoice-phone"></span></p>
        <p><strong>آدرس:</strong> <span id="invoice-address"></span></p>
        <table>
            <thead>
                <tr>
                    <th>محصول</th>
                    <th>تعداد</th>
                    <th>قیمت واحد</th>
                    <th>جمع</th>
                </tr>
            </thead>
            <tbody id="invoice-items-body"></tbody>
            <tfoot>
                <tr>
                    <td colspan="3"><strong>جمع کل</strong></td>
                    <td id="invoice-total"></td>
                </tr>
            </tfoot>
        </table>
        <button onclick="printInvoice()">چاپ فاکتور</button>
        <button onclick="sendToTelegram()">ارسال به تلگرام</button>
    </div>
</div>

<!-- جاوااسکریپت -->
<script>
// تنظیمات تلگرام
const telegramBotToken = "توکن-ربات-تو";
const adminChatId = "آیدی-چت-ادمین";

// داده محصولات نمونه
const products = [
    {id:1,name:"تی‌شرت سفید",price:120000,image:"https://via.placeholder.com/300x220?text=تی‌شرت"},
    {id:2,name:"کفش اسپرت",price:450000,image:"https://via.placeholder.com/300x220?text=کفش"},
    {id:3,name:"کلاه",price:80000,image:"https://via.placeholder.com/300x220?text=کلاه"},
    {id:4,name:"شلوار جین",price:300000,image:"https://via.placeholder.com/300x220?text=شلوار"},
];

let cart = [];
let currentFilter = 'all';

// نمایش محصولات
function displayProducts() {
    const productsGrid = document.getElementById('products-grid');
    productsGrid.innerHTML = '';
    let filteredProducts = products;
    if(currentFilter!=='all') filteredProducts = products.filter(p=>p.name.includes(currentFilter));
    filteredProducts.forEach(product=>{
        const productCard = document.createElement('div');
        productCard.className='product-card';
        productCard.innerHTML=`
            <img src="${product.image}" class="product-image">
            <div class="product-info">
                <div class="product-name">${product.name}</div>
                <div class="product-price"><span class="price">${product.price.toLocaleString()} تومان</span></div>
                <div class="quantity-selector">
                    <span class="quantity-label">تعداد:</span>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="decreaseQuantity(${product.id})">-</button>
                        <input type="number" id="quantity-${product.id}" class="quantity-input" value="1" min="1">
                        <button class="quantity-btn" onclick="increaseQuantity(${product.id})">+</button>
                    </div>
                </div>
                <div class="product-actions">
                    <button class="add-to-cart" onclick="addToCart(${product.id})">افزودن به سبد</button>
                    <button class="wishlist-btn" onclick="toggleWishlist(this)">❤</button>
                </div>
            </div>`;
        productsGrid.appendChild(productCard);
    });
    if(filteredProducts.length===0) productsGrid.innerHTML='<div class="error">هیچ محصولی یافت نشد</div>';
}

function filterProducts(category){currentFilter=category;displayProducts();}
function showAllProducts(){currentFilter='all';displayProducts();}

function increaseQuantity(id){const input=document.getElementById(`quantity-${id}`);input.value=parseInt(input.value)+1;}
function decreaseQuantity(id){const input=document.getElementById(`quantity-${id}`);if(parseInt(input.value)>1) input.value=parseInt(input.value)-1;}

function addToCart(id){
    const product=products.find(p=>p.id===id);
    const quantity=parseInt(document.getElementById(`quantity-${id}`).value);
    const existing=cart.find(item=>item.id===id);
    if(existing){existing.quantity+=quantity;} else {cart.push({...product,quantity});}
    updateCart();
}

function updateCart(){
    const cartItems=document.getElementById('cart-items');
    const cartCount=document.querySelector('.cart-count');
    cartItems.innerHTML='';
    let total=0;
    if(cart.length===0){cartItems.innerHTML='<div class="empty-cart">سبد خرید شما خالی است</div>';}
    else{
        cart.forEach(item=>{
            total+=item.price*item.quantity;
            const div=document.createElement('div');
            div.className='cart-item';
            div.innerHTML=`
                <img src="${item.image}" class="cart-item-image">
                <div class="cart-item-details">
                    <span class="cart-item-name">${item.name}</span>
                    <span class="cart-item-price">${item.price.toLocaleString()} تومان</span>
                    <div class="cart-item-quantity">
                        <button class="quantity-btn" onclick="decreaseCartQuantity(${item.id})">-</button>
                        <input type="number" class="quantity-input" value="${item.quantity}" min="1" onchange="changeCartQuantity(${item.id}, this.value)">
                        <button class="quantity-btn" onclick="increaseCartQuantity(${item.id})">+</button>
                    </div>
                    <button class="remove-item" onclick="removeFromCart(${item.id})">حذف</button>
                </div>`;
            cartItems.appendChild(div);
        });
    }
    cartCount.textContent=cart.reduce((acc,item)=>acc+item.quantity,0);
    document.getElementById('cart-total').textContent=total.toLocaleString()+' تومان';
}

function removeFromCart(id){cart=cart.filter(item=>item.id!==id);updateCart();}
function increaseCartQuantity(id){const item=cart.find(i=>i.id===id);if(item)item.quantity++;updateCart();}
function decreaseCartQuantity(id){const item=cart.find(i=>i.id===id);if(item&&item.quantity>1)item.quantity--;updateCart();}
function changeCartQuantity(id,value){const item=cart.find(i=>i.id===id);if(item)item.quantity=parseInt(value);updateCart();}
function toggleCart(){document.getElementById('cart-popup').classList.toggle('active');document.getElementById('overlay').classList.toggle('active');}
function closeCart(){document.getElementById('cart-popup').classList.remove('active');document.getElementById('overlay').classList.remove('active');}

function openUserInfoModal(){
    document.getElementById('user-info-modal').classList.add('active');
    document.getElementById('overlay').classList.add('active');
    const orderItems=document.getElementById('order-items'); orderItems.innerHTML='';
    cart.forEach(item=>{
        const input=document.createElement('input');
        input.type='hidden'; input.name=`product_${item.id}`;
        input.value=JSON.stringify({name:item.name,price:item.price,quantity:item.quantity});
        orderItems.appendChild(input);
    });
}

function closeUserInfoModal(){document.getElementById('user-info-modal').classList.remove('active');document.getElementById('overlay').classList.remove('active');}
function closeAllModals(){closeCart();closeUserInfoModal();closeInvoice();}

function generateInvoice(){
    const name=document.getElementById('name').value;
    const phone=document.getElementById('phone').value;
    const address=document.getElementById('address').value;
    document.getElementById('invoice-name').textContent=name;
    document.getElementById('invoice-phone').textContent=phone;
    document.getElementById('invoice-address').textContent=address;
    const invoiceBody=document.getElementById('invoice-items-body');
    invoiceBody.innerHTML=''; let total=0;
    cart.forEach(item=>{
        const tr=document.createElement('tr');
        const itemTotal=item.price*item.quantity;
        total+=itemTotal;
        tr.innerHTML=`<td>${item.name}</td><td>${item.quantity}</td><td>${item.price.toLocaleString()}</td><td>${itemTotal.toLocaleString()}</td>`;
        invoiceBody.appendChild(tr);
    });
    document.getElementById('invoice-total').textContent=total.toLocaleString();
    closeUserInfoModal();
    document.getElementById('invoice-modal').classList.add('active');
    document.getElementById('overlay').classList.add('active');
}

function closeInvoice(){document.getElementById('invoice-modal').classList.remove('active');document.getElementById('overlay').classList.remove('active');}
function printInvoice(){const invoiceContent=document.getElementById('invoice-modal').innerHTML; const newWin=window.open('','', 'width=800,height=600'); newWin.document.write(invoiceContent); newWin.document.close(); newWin.print();}

async function sendToTelegram(){
    const name=document.getElementById('name').value;
    const phone=document.getElementById('phone').value;
    const address=document.getElementById('address').value;
    let message=`🛒 سفارش جدید\n\nنام مشتری: ${name}\nشماره تماس: ${phone}\nآدرس: ${address}\n\n`;
    cart.forEach(item=>{message+=`${item.name} - ${item.quantity} عدد - ${item.price.toLocaleString()} تومان\n`;});
    message+=`\nجمع کل: ${cart.reduce((acc,i)=>acc+i.price*i.quantity,0).toLocaleString()} تومان`;
    try{
        await fetch(`https://api.telegram.org/bot${telegramBotToken}/sendMessage`,{
            method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({chat_id:adminChatId,text:message})
        });
        alert('سفارش با موفقیت به تلگرام ارسال شد');
    }catch(err){alert('خطا در ارسال سفارش به تلگرام');}
}

function toggleCategories(){document.getElementById('categories-menu').classList.toggle('active');}
function toggleWishlist(btn){btn.classList.toggle('active');}
function goToHome(){window.location.href='/';}
function showGuide(){alert('راهنمای خرید');} function showAccount(){alert('حساب کاربری');}
function showTracking(){alert('پیگیری سفارش');} function showWishlist(){alert('علاقه‌مندی‌ها');}

// نمایش اولیه محصولات
displayProducts();
</script>
</body>
</html>
